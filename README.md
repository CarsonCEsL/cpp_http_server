# cpp_http_server

本项目旨在实现一个轻量级 C++ HTTP 服务器。以下内容按照软件需求规格（SRS）的组织结构进行整理，用于指导后续设计与实现，适合从 0 开始逐步落地。

## 1. 引言
### 1.1 目的
- 明确功能范围、边界与质量目标，避免实现发散。
- 为设计、开发、测试提供统一标准与验收依据。
- 便于后续扩展与模块化重构。

### 1.2 范围
- 提供 HTTP/1.1 的基本服务能力：接受请求、解析报文、生成响应。
- 支持本地开发与学习用途，优先保证可读性与可扩展性。
- 仅实现最小可用特性，不追求完整 RFC 覆盖。

### 1.3 术语
- HTTP/1.1：超文本传输协议 1.1 版本。
- 连接：客户端与服务器之间的 TCP 会话。
- 监听：服务器在指定端口等待连接的过程。
- 路由：根据请求路径/方法分发处理逻辑的机制。

## 2. 总体描述
### 2.1 产品视角
- 本项目为独立服务器程序，运行在本地或服务器环境。
- 采用单进程 + 多连接的模型（并发策略后续决定）。
- 设计目标为“最小可用 + 可扩展”，便于逐步演进。

### 2.2 用户特征
- 具备 C++ 基础语法与编译流程理解的开发者与学习者。
- 期望可读、清晰、便于调试的代码结构。

### 2.3 运行环境
- 操作系统：macOS / Linux（以 POSIX socket 为基础）。
- 编译器：支持 C++17 的编译器（例如 clang / gcc）。
- 构建工具：CMake 3.16+。

### 2.4 约束
- 语言标准：C++17。
- 构建系统：CMake。
- 不依赖重量级第三方网络库，优先使用标准库与系统调用。

### 2.5 假设与依赖
- 依赖系统提供的 TCP/IP 栈与基本文件 I/O 能力。
- 假设开发环境具备基本的编译链与调试工具。
- 配置与日志以本地文件或标准输出为主。

## 3. 需求规格
### 3.1 功能性需求
- 监听指定 IP/端口，接受 TCP 连接。
- 读取客户端请求，解析请求行、头部与可选请求体。
- 处理基础方法：`GET`、`POST`（其余方法可返回 405）。
- 支持最小路由分发：根据 `method + path` 选择处理器。
- 生成 HTTP/1.1 响应，包括状态行、头部、响应体。
- 支持常见状态码：200、400、404、405、500。
- 支持 `Content-Length` 正确计算与返回。
- 支持基础的连接关闭策略（默认 `Connection: close`）。

### 3.2 非功能性需求
- 稳定性：连续运行不崩溃；异常请求不影响进程存活。
- 性能：在本地可稳定处理并发连接（具体并发模型后续定义）。
- 可维护性：模块化代码结构、清晰接口与单一职责。
- 可观察性：提供基础日志输出，便于排查问题。

### 3.3 外部接口需求
- 网络接口：
  - 输入：TCP 连接上的 HTTP 请求数据。
  - 输出：HTTP/1.1 响应数据。
- 配置接口（初期可选）：
  - 监听地址与端口（可通过命令行参数或配置文件）。
- 日志接口：
  - 默认输出到标准输出，后续可扩展为文件日志。

## 4. 项目结构（拟定）
```
.
├─ CMakeLists.txt
├─ README.md
├─ AGENTS.md
└─ src
   └─ main.cpp
```

计划扩展目录（后续落地）：
```
src/
  core/        # 服务器核心逻辑（监听、连接管理）
  http/        # 请求解析、响应构建
  routing/     # 路由与处理器
  utils/       # 工具与公共基础设施
tests/         # 单元测试与集成测试
```

## 5. 版本与里程碑
- v0.1：完成基础 TCP 监听与最小响应。
- v0.2：支持简单路由与静态资源。
- v0.3：完善并发与基础配置。
- v0.4：完善日志与错误处理策略。
